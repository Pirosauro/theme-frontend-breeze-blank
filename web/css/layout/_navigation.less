.navigation {
    .submenu {
        &:extend(.breeze-dropdown);
        &.shown {
            &:extend(.breeze-dropdown-visible);
        }
    }
    li > a {
        &:extend(.breeze-dropdown .item all);
    }
}

@media @media-md-down {
    .navigation-wrapper {
        .breeze-slideout();
        .nav-open & {
            .breeze-slideout-visible();
        }
    }
    .nav-toggle::before {
        .breeze-slideout-overlay();
        .nav-open & {
            .breeze-slideout-overlay-visible();
        }
    }
}

& when (@critical) {
    .nav-toggle {
        flex-shrink: 0;
        flex-grow: 0;
        display: flex;
        align-items: center;
        .margin-right(-@2);

        span {
            &:extend(.sr-only);
        }

        &::after {
            content: '';
            display: block;
            width: @12;
            height: @12;
        }
    }

    .navigation-wrapper {
        .navigation {
            &:extend(.container);
        }

        .navigation > ul {
            .margin-left(-@2);
        }
    }

    .navigation {
        li {
            position: relative;
        }

        .parent > a {
            .padding-right(@6);
        }
    }

    @media @media-md {
        .nav-toggle {
            display: none;
        }

        .navigation {
            > ul {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: @2;
            }
        }
    }
}

& when not (@critical) {
    .nav-toggle {
        -webkit-tap-highlight-color: transparent;
        cursor: pointer;
        &::after {
            z-index: 39;
            .breeze-icon(@icon-menu);
            .nav-open & {
                .breeze-icon(@icon-x);
                color: var(--bg-main);
                opacity: .8;
            }
        }
    }

    .navigation {
        li > a {
            position: relative;
            &:hover {
                background: var(--gray-100);
            }
        }

        .parent {
            > a {
                .ui-icon,
                &::after {
                    content: '';
                    position: absolute;
                    .right(@1);
                    width: @5;
                    height: @6;
                    &:extend(.transition);
                    .breeze-icon(@icon-chevron, @3);
                }
                .ui-icon {
                    -webkit-mask-size: @4 @4;
                }
            }
        }
    }

    @media @media-md-down {
        .navigation-wrapper {
            li > a {
                padding: @2;
            }

            .submenu {
                padding: 0 0 0 @4;
                width: auto;
                top: -9999px;
                border: 0;
                box-shadow: none;
                background: none;
                transform: scale(1);
                &.shown {
                    position: static;
                    transform: scale(1);
                }
            }

            .parent > a::after {
                display: none;
            }
            .opened > a .ui-icon {
                transform: rotate(90deg);
            }
        }
    }

    @media @media-md {
        .navigation-wrapper {
            .opened > a {
                background: var(--gray-100);
            }

            .parent {
                > a {
                    .ui-icon {
                        display: none;
                    }
                    &::after {
                        transition: none;
                    }
                }
                &.level-top > a::after {
                    transform: rotate(90deg);
                }
            }

            .submenu {
                width: @52;
                top: ~"calc(100% + @{1})";
                .left(0);
                .right(auto);

                .submenu {
                    top: -@0-5;
                    left: ~"calc(100% - @{4})";
                }
            }
        }
    }
}
