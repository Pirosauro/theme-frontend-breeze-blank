& when (@critical) {
    .header.panel,
    .header.links,
    .header.content {
        display: flex;
        gap: @4;
    }

    .header.links {
        a .counter {
            .breeze-text-sm();
            opacity: .6;
            white-space: nowrap;
            &::before {
                content: '(';
            }
            &::after {
                content: ')';
            }
        }
    }

    .header.panel {
        &:extend(.container);
        justify-content: flex-end;
        align-items: center;

        @media @media-xs-down {
            flex-wrap: wrap;
            justify-content: center;
            .header-panel-info {
                width: 100%;
                margin: 0;
                justify-content: center;
            }
            > .switcher {
                max-width: 50%;
            }
        }
    }

    .header.content {
        &:extend(.container);
        .lib-css(padding-top, @header-content__padding-top);
        .lib-css(padding-bottom, @header-content__padding-bottom);
        .lib-css(background, @header-content__background);
        align-items: center;
        position: relative;
    }

    .page-header {
        & when (@header__dark) {
            &:extend(.breeze-invert-colors all);
            & when (@header__background = false) {
                .lib-css(background, @theme__dark-color);
            }
        }

        position: relative;
        .lib-css(background, @header__background);
        .lib-css(box-shadow, @header__box-shadow);
        .lib-css(border, @header__border);
        .lib-css(border-width, @header__border-width);

        .panel.wrapper {
            & when (@header-panel__dark) {
                &:extend(.breeze-invert-colors all);
                & when (@header-panel__background = false) {
                    .lib-css(background, @theme__dark-color);
                }
            }

            .lib-css(color, @header-panel__color);
            .lib-css(background, @header-panel__background);
            .lib-css(border, @header-panel__border);
            .lib-css(border-width, @header-panel__border-width);
        }

        .switcher .label {
            &:extend(.breeze-sr-only);
        }

        .logo {
            img {
                &:not([width]) {
                    width: 100%;
                    min-width: 80px;
                    max-width: 170px;
                }

                & when (@header__dark = false) {
                    & when (@respect-color-scheme = true) {
                        @media @media-dark {
                            .lib-css(filter, @logo__dark__filter);
                        }
                    }
                }
            }
            + *,
            + .navigation-wrapper + * {
                .margin-left(auto);
            }
        }

        .block .block-title {
            font-size: @4;
            margin: 0;
        }
    }

    .header-panel-info {
        .lib-css(font-weight, @header-panel-info__font-weight);
        .lib-css(font-size, @header-panel-info__font-size);
        .lib-css(letter-spacing, @header-panel-info__letter-spacing);
        .lib-css(margin, @header-panel-info__margin);
        .lib-css(padding, @header-panel-info__padding);
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        column-gap: @3;

        .heading {
            display: none;
        }
        .icon {
            width: @5;
            height: @5;
        }
        a {
            color: currentColor;
            display: flex;
            align-items: center;
            gap: @1;
        }

        // when mobile menu is active - show it there.
        @media @navigation__media-mobile {
            .header.panel & {
                &:not(.static) {
                    display: none;
                }
            }
        }
        @media @navigation__media-desktop {
            .navigation-wrapper & {
                display: none;
            }
        }
    }

    .header.content > .actions > .action {
        .lib-css(color, @header-actions__color);
        .lib-css(font-weight, @header-actions__font-weight);
        .lib-css(gap, @header-actions__gap);

        @media @media-md-down {
            span {
                display: none;
            }
        }
    }

    .account-dropdown,
    .wishlist-dropdown {
        > .action {
            &::before {
                content: '';
                display: block;
                flex-shrink: 0;
                width: @header-actions-icon__width;
                height: @header-actions-icon__height;
            }
        }
    }
}

& when not (@critical) {
    .header.links {
        .dropdown & {
            flex-direction: column;
            gap: 0;
        }
    }
    .account-dropdown > .action::before {
        .breeze-icon(@header-actions-icon__account, @header-actions-icon__width, @header-actions-icon__height);
    }
    .wishlist-dropdown > .action::before {
        .breeze-icon(@header-actions-icon__wishlist, @header-actions-icon__width, @header-actions-icon__height);
    }
    .navigation-wrapper {
        .header-panel-info {
            margin-top: @4;
            padding: 0 @2;
            flex-direction: column;
            align-items: flex-start;
            row-gap: @3;
            .heading {
                display: block;
                text-transform: uppercase;
                font-size: @font-size__sm;
                font-weight: 600;
                color: @muted__color;
            }
            a {
                opacity: .7;
            }
        }
    }
}
