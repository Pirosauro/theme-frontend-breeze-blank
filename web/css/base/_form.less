.field-tooltip-content {
    &:extend(.breeze-dropdown);
    &[aria-hidden="false"] {
        &:extend(.breeze-dropdown-visible);
    }
}

& when (@critical) {
    fieldset {
        margin-bottom: @8;
        &:last-child {
            margin-bottom: 0;
        }
        &.field {
            margin-bottom: 0;
        }
    }
    label {
        button {
            &:extend(.button-reset all);
            &:extend(.link-common all);
        }
    }
    form {
        + form {
            margin-top: @5;
        }
        .legend {
            .text-xl();
            width: 100%;
            margin: 0 0 @5;
            padding: 0 0 @0-5;
            border-bottom: 1px solid var(--color-divider);

            + br {
                display: none;
            }
        }
        .actions-toolbar {
            margin-top: @5;
            margin-bottom: @5;
        }
    }
    .fields {
        display: flex;
        gap: @2;
    }
    .nested > .field,
    button + .field,
    .field + .fieldset,
    .field + .field {
        margin-top: @3;
    }
    .field {
        .choice + .choice {
            margin-top: @0-5;
        }
        .addon {
            display: flex;
            align-items: center;
            gap: @2;
        }
        .range {
            > .field:first-child .control {
                display: flex;
                gap: @2;
                align-items: center;

                &::after {
                    content: 'â€”';
                }
            }
            .field + .field {
                margin-top: 0;
            }
        }
        &.required,
        &._required {
            > .label {
                display: flex;
                gap: @1;
                &::after {
                    content: '*';
                    color: var(--red-600);
                }
            }
        }
        &.choice {
            display: flex;
            gap: @1-5;
            align-items: flex-start;
            clear: left;
            position: relative;
            > [type="radio"],
            > [type="checkbox"] {
                margin-top: @1;
            }
            .field-tooltip {
                margin-top: @0-5;
            }
            div.mage-error {
                .right(0);
                .padding-left(@2);
                position: absolute;
                background: var(--bg-main);
                z-index: 11;
            }
        }
        .control {
            position: relative;
        }
        .label + .control {
            margin-top: @0-5;
        }
        ._with-tooltip {
            input, select, textarea {
                width: ~"calc(100% - @{7})";
            }
            .field-tooltip {
                position: absolute;
                .right(@1);
                top: @2-5;
                z-index: 11;
            }
        }
        &.street {
            .control {
                label {
                    &:extend(.sr-only);
                }
            }
        }
    }
    .control {
        .note {
            .text-sm();
            display: block;
            margin-top: @1;
        }
    }
    .field-tooltip {
        display: inline-block;
        position: relative;
        .label {
            &:extend(.sr-only);
        }
    }
    .field-tooltip-action {
        color: var(--color-muted);
        &,
        &::before {
            display: block;
            width: @5;
            height: @5;
        }
        &::before {
            content: '';
        }
        span {
            &:extend(.sr-only);
        }
    }
    .control.captcha-image {
        margin-top: @2;
        display: flex;
        align-items: center;
        gap: @2;
    }
}

& when not (@critical) {
    div.mage-error,
    div.field-error {
        margin-top: @0-5;
        font-size: .9rem;
        color: var(--red-600);
    }
    .field-tooltip {
        --dropdown-width: @72;
        --dropdown-padding: @2 @3;
    }
    .field-tooltip-action {
        &::before {
            .breeze-icon(@icon-question-mark-circle, @5);
        }
    }
}
