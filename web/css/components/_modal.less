.modals-overlay,
.modal-custom-overlay {
    .breeze-overlay();
    ._show ~ & {
        .breeze-overlay-visible();
    }
}

& when not (@critical) {
    body._has-modal {
        overflow: hidden;
    }

    .modal-popup,
    .modal-custom {
        &:extend(.inset-0);
        position: fixed;
        z-index: 900;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        padding: @7;
        visibility: hidden;
        pointer-events: none;

        &._show {
            visibility: visible;
        }

        @media @media-sm {
            justify-content: flex-start;
        }
    }

    .modal-inner-wrap {
        --modal-max-width: 500px;
        --modal-max-height: 85vh;
        display: flex;
        flex-direction: column;
        padding: 0;
        width: 95%;
        max-width: var(--modal-max-width);
        max-height: var(--modal-max-height);
        background: var(--bg-main);
        pointer-events: auto;
        .shadow-xl-around();

        .modal-xl & {
            --modal-max-width: 850px;
        }

        &:extend(.transition);
        opacity: 0;
        @media @media-md-down {
            transform: translateY(10px);
        }
        @media @media-md {
            transform: scale(0.97);
        }

        ._show & {
            @media @media-md-down {
               transform: translateY(0);
            }
            @media @media-md {
                transform: scale(1);
            }
            opacity: 1;
        }
    }

    .modal-header,
    .modal-content,
    .modal-footer {
        padding: 0 @4;
    }

    .modal-header,
    .modal-footer {
        flex-shrink: 0;
        padding-top: @4;
    }

    .modal-header {
        .action-close {
            &:extend(.button-x all);
        }
    }

    .modal-content {
        overflow: auto;
        overscroll-behavior: contain;
        &:last-child {
            padding-bottom: @4;
        }
    }

    .modal-footer {
        padding-bottom: @4;
        display: flex;
        justify-content: flex-end;
        gap: @2;
    }
}
