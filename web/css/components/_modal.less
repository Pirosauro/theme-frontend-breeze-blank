.modals-overlay,
.modal-custom-overlay {
    .breeze-overlay();
    ._show ~ & {
        .breeze-overlay-visible();
    }
}

& when not (@critical) {
    body.breeze {
        &._has-modal,
        &._has-modal-custom {
            overflow: hidden;
        }
    }

    .modal-popup,
    .modal-custom {
        --modal-max-width: 500px;
        --modal-max-height: 85vh;
        --modal-padding-x: @4;
        --modal-padding-y: var(--modal-padding-x);

        @media @media-md {
            --modal-padding-x: @8;
        }

        &:extend(.inset-0);
        position: fixed;
        z-index: 900;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        padding: @24 @7 @7;
        visibility: hidden;
        pointer-events: none;

        &._show {
            visibility: visible;
        }

        @media @media-sm {
            justify-content: flex-start;
        }
    }

    .modal-inner-wrap {
        display: flex;
        flex-direction: column;
        padding: 0;
        width: 100%;
        max-width: var(--modal-max-width);
        max-height: var(--modal-max-height);
        max-height: -webkit-fill-available;
        background: var(--bg-main);
        pointer-events: auto;
        .shadow-xl-around();

        .modal-xl & {
            --modal-max-width: 850px;
        }

        &:extend(.transition);
        opacity: 0;
        @media @media-md-down {
            transform: translateY(10px);
        }
        @media @media-md {
            transform: scale(0.97);
        }

        ._show & {
            @media @media-md-down {
               transform: translateY(0);
            }
            @media @media-md {
                transform: scale(1);
            }
            opacity: 1;
        }

        .block-title {
            .text-2xl();
            margin-bottom: @1;
        }
    }

    .modal-header,
    .modal-content,
    .modal-footer {
        padding: 0 var(--modal-padding-x);
    }

    .modal-header,
    .modal-footer {
        flex-shrink: 0;
        padding-top: var(--modal-padding-y);
        position: relative;
    }

    .modal-header {
        .action-close {
            &:extend(.button-x all);
            background: var(--bg-main);
            position: absolute;
            top: var(--modal-padding-y);
            .right(var(--modal-padding-x));
        }
    }

    .modal-content {
        overflow: auto;
        overscroll-behavior: contain;
        &:last-child {
            padding-bottom: var(--modal-padding-y);
        }
    }

    .modal-footer {
        padding-bottom: var(--modal-padding-y);
        display: flex;
        justify-content: flex-end;
        gap: @2;
    }
}
